<div class="page-container">
  <!-- Page Header -->
  <div class="page-header">
    <div>
      <h3 class="mb-1 fw-bold">Templates</h3>
      <p class="text-muted mb-0">Manage your certificate templates</p>
    </div>

    <button class="btn-add" (click)="openAddTemplate()">
      <i class="bi bi-file-earmark-plus-fill me-2"></i>Add Template
    </button>
  </div>

  <!-- Templates Table -->
  <div class="content-card">
    <div class="table-responsive">
      <table class="data-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Created</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of templates">
            <td>
              <div class="d-flex align-items-center">
                <!-- Optional avatar with first letter
                <div class="avatar-circle me-3">{{ t.name.charAt(0).toUpperCase() }}</div>
                -->
                <span class="fw-semibold">{{ t.name }}</span>
              </div>
            </td>

            <td>{{ t.createdAt | date: 'mediumDate' }}</td>

            <td class="text-end">
              <button class="btn-action btn-action-edit me-2" (click)="preview(t)" title="Preview/Edit">
                <i class="bi bi-eye-fill"></i>
              </button>
            <button class="btn-action btn-action-generate" (click)="goToGenerate(t.id)" title="Generate">
                <i class="bi bi-file-earmark-pdf-fill"></i>
            </button>
              <button class="btn-action btn-action-delete" (click)="delete(t.id)" title="Delete">
                <i class="bi bi-trash-fill"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Template Preview -->
  <div *ngIf="previewTemplate" class="content-card mt-4 p-3">
    <h5 class="fw-bold">Preview: {{ previewTemplate?.name }}</h5>

    <div class="d-flex align-items-center gap-3 mt-2">
      <img *ngIf="previewTemplate?.logoUrl" [src]="previewTemplate?.logoUrl" style="height: 48px;" alt="Logo" />
      <img *ngIf="previewTemplate?.signatureUrl" [src]="previewTemplate?.signatureUrl" style="height: 48px;" alt="Signature" />
    </div>

    <div class="mt-3" [innerHTML]="previewTemplate?.html"></div>
  </div>
</div>
